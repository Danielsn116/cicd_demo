parameters:
  - name: agent
    type: string
    default: windows-latest
  - name: templatePath
    type: string
    default: '$(System.DefaultWorkingDirectory)'
  - name: bicepBuild
    type: string
  - name: preBuildSteps
    type: stepList
    default:
      - template: ../task/install-single-module-task.yml
  - name: afterBuildSteps
    type: stepList
    default:
      - template: ../task/publish-pipeline-artifact-task.yml
  - name: azure_environment
    type: string


steps:
  - ${{ parameters.preBuildSteps }}
  - template: ../task/build-bicep-task.yml
    parameters:
      templatePath: ${{ parameters.templatePath }}
      bicepBuild: ${{ parameters.bicepBuild }}
  - ${{ parameters.afterBuildSteps }}